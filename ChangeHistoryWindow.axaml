<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:services="clr-namespace:MSM.Services"
        xmlns:system="clr-namespace:System;assembly=System.Runtime"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="MSM.ChangeHistoryWindow"
        Title="재고 변경 내역"
        MinWidth="800"
        MinHeight="500"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource SemiGrey1Color}">

    <DockPanel Margin="20">
        <!-- Header -->
        <StackPanel DockPanel.Dock="Top" Margin="0,0,0,16">
            <TextBlock Text="재고 변경 내역"
                       FontSize="24"
                       FontWeight="Bold"
                       Margin="0,0,0,16"/>

            <!-- Date Filter -->
            <Border Background="{DynamicResource SemiGrey0Color}"
                    CornerRadius="8"
                    Padding="16">
                <StackPanel Orientation="Horizontal" Spacing="16">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="시작일:"
                                   VerticalAlignment="Center"
                                   FontSize="14"/>
                        <CalendarDatePicker Name="StartDatePicker"
                                            Width="150"
                                            FontSize="14"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="종료일:"
                                   VerticalAlignment="Center"
                                   FontSize="14"/>
                        <CalendarDatePicker Name="EndDatePicker"
                                            Width="150"
                                            FontSize="14"/>
                    </StackPanel>
                    <Button Name="SearchButton"
                            Content="조회"
                            Classes="Primary"
                            Padding="20,8"
                            FontSize="14"/>
                    <Button Name="TodayButton"
                            Content="오늘"
                            Padding="20,8"
                            FontSize="14"/>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Footer with Summary -->
        <Border DockPanel.Dock="Bottom"
                Background="{DynamicResource SemiGrey0Color}"
                CornerRadius="8"
                Padding="16"
                Margin="0,16,0,0">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="24">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="총 변경 건수:"
                                   FontSize="14"
                                   VerticalAlignment="Center"/>
                        <TextBlock Name="TotalCountText"
                                   Text="0건"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="총 변경 수량:"
                                   FontSize="14"
                                   VerticalAlignment="Center"/>
                        <TextBlock Name="TotalChangedText"
                                   Text="0개"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
                <Button Grid.Column="1"
                        Name="CloseButton"
                        Content="닫기"
                        Padding="20,8"
                        FontSize="14"/>
            </Grid>
        </Border>

        <!-- Data Grid -->
        <Border Background="{DynamicResource SemiGrey0Color}"
                CornerRadius="8"
                Padding="8">
            <DataGrid Name="HistoryDataGrid"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      CanUserReorderColumns="False"
                      CanUserResizeColumns="True"
                      GridLinesVisibility="Horizontal"
                      BorderThickness="0"
                      x:CompileBindings="False">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="시간"
                                        Binding="{Binding TimeFormatted}"
                                        Width="80"/>
                    <DataGridTextColumn Header="날짜"
                                        Binding="{Binding DateFormatted}"
                                        Width="100"/>
                    <DataGridTextColumn Header="바코드"
                                        Binding="{Binding Barcode}"
                                        Width="120"/>
                    <DataGridTextColumn Header="상품명"
                                        Binding="{Binding Name}"
                                        Width="*"/>
                    <DataGridTextColumn Header="변경 전"
                                        Binding="{Binding OldQty}"
                                        Width="80"/>
                    <DataGridTextColumn Header="변경 후"
                                        Binding="{Binding NewQty}"
                                        Width="80"/>
                    <DataGridTextColumn Header="변경"
                                        Binding="{Binding ChangedQty}"
                                        Width="70"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </DockPanel>
</Window>
